@server = http://localhost:4004
@me = Authorization: Basic {{$processEnv USER}}:


### ------------------------------------------------------------------------
# Get service info
GET {{server}}/browse
{{me}}


### ------------------------------------------------------------------------
# Get $metadata document
GET {{server}}/browse/$metadata
{{me}}


### ------------------------------------------------------------------------
# Browse Books as any user
GET {{server}}/browse/ListOfBooks?
  # &$select=title,stock
  &$expand=genre
  # &sap-language=de
{{me}}


### ------------------------------------------------------------------------
# Fetch Authors as admin
GET {{server}}/admin/Authors?
  # &$select=name,dateOfBirth,placeOfBirth
  # &$expand=books($select=title;$expand=currency)
  # &$filter=ID eq 101
  # &sap-language=de
Authorization: Basic alice:

### ------------------------------------------------------------------------
# Create Author
POST {{server}}/admin/Authors
Content-Type: application/json;IEEE754Compatible=true
Authorization: Basic alice:

{
  "ID": 112,
  "name": "Shakespeeeeere",
  "age": 22
}


### ------------------------------------------------------------------------
# Create book
POST {{server}}/admin/Books
Content-Type: application/json;IEEE754Compatible=true
Authorization: Basic alice:

{
  "ID": 2,
  "title": "Poems : Pocket Poets",
  "descr": "The Everyman's Library Pocket Poets hardcover series is popular for its compact size and reasonable price which does not compromise content. Poems: Bronte contains poems that demonstrate a sensibility elemental in its force with an imaginative discipline and flexibility of the highest order. Also included are an Editor's Note and an index of first lines.",
  "author": { "ID": 101 },
  "genre": { "ID": 12 },
  "stock": 5,
  "price": "12.05",
  "currency": { "code": "USD" }
}

### ------------------------------------------------------------------------
# Post image to books
POST {{server}}/admin/Books(201)/images
Content-Type: application/json;IEEE754Compatible=true
Authorization: Basic alice:

{
  "name": "cover.png"
}

### ------------------------------------------------------------------------
# Get image to books
GET {{server}}/admin/Books(201)/images
Authorization: Basic alice:

### ------------------------------------------------------------------------
# Put image content to books
PUT {{server}}/admin/Books(201)/images('UdB9D8vpCjjsVv_tThh55YhEZly67PCpChG-2TboX1k')/content
Content-Type: image/png
Authorization: Basic alice:

< ./cap.png


### ------------------------------------------------------------------------
# Reading image from from the server directly
GET {{server}}/browse/Books(2)/image


### ------------------------------------------------------------------------
# Submit Order as authenticated user
# (send that three times to get out-of-stock message)
POST {{server}}/browse/submitOrder
Content-Type: application/json
{{me}}

{ "book":201, "quantity":5 }


### ------------------------------------------------------------------------
# Browse Genres
GET {{server}}/browse/Genres?
# &$filter=parent_ID eq null&$select=name
# &$expand=children($select=name)
{{me}}
